(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[0],{40:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(8),o=a(4),i=a.n(o),r=a(21),l=a.n(r),s=(a(40),a(33)),c=a(32),u=a(14),f=a.n(u),h=a(17),d=(a(53),a(27)),p=a(28),m=a(9),g=a(29),x=a(31),y=a(34),v=a(30),b=a(18),w=a(12),j=a(0);a(54);var M,O,k={length:[],area:[]},_=[].concat(Object(m.a)(w.a),[{id:"gl-draw-line-active-length",type:"symbol",filter:["all",["==","$type","LineString"],["==","active","true"],["==","user_has_length","true"]],layout:{"symbol-placement":"line-center","text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-max-angle":30,"text-max-width":300,"text-field":"{user_length} {user_length_unit}","text-font":["IranSans-Noto"],"text-size":["interpolate",["linear"],["zoom"],8,8,10,12,16,16],"text-allow-overlap":!1},paint:{"text-opacity":["interpolate",["linear"],["zoom"],8,1],"text-color":"#000","text-halo-color":["interpolate",["linear"],["zoom"],2,"#ffffff",3,"#ffffff"],"text-halo-width":.3,"text-halo-blur":1}},{id:"gl-draw-polygon-active-length",type:"symbol",filter:["all",["==","$type","Polygon"],["==","active","true"],["==","user_has_length","true"]],layout:{"symbol-placement":"line-center","text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-max-angle":30,"text-max-width":300,"text-field":"{user_length} {user_length_unit}","text-font":["IranSans-Noto"],"text-size":["interpolate",["linear"],["zoom"],8,8,10,12,16,16],"text-allow-overlap":!1},paint:{"text-opacity":["interpolate",["linear"],["zoom"],8,1],"text-color":"#000","text-halo-color":["interpolate",["linear"],["zoom"],2,"#ffffff",3,"#ffffff"],"text-halo-width":.3,"text-halo-blur":1}},{id:"gl-draw-polygon-active-area",type:"symbol",filter:["all",["==","$type","Polygon"],["==","active","true"],["==","user_has_area","true"]],layout:{"symbol-placement":"line","text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-max-angle":30,"text-max-width":300,"text-field":"{user_area} meters^2","text-font":["IranSans-Noto"],"text-size":["interpolate",["linear"],["zoom"],8,8,10,12,16,16],"text-allow-overlap":!1},paint:{"text-opacity":["interpolate",["linear"],["zoom"],8,1],"text-color":"#000","text-halo-color":["interpolate",["linear"],["zoom"],2,"#ffffff",3,"#ffffff"],"text-halo-width":.3,"text-halo-blur":1}}]),z=function(){function e(t){Object(d.a)(this,e),this.draw=t.draw,this.onRemoveOrig=t.draw.onRemove;var a=this.draw.options,n=a.union,o=a.copy,i=a.buffer,r=a.length,l=a.area;this.initialOptions={union:n,copy:o,buffer:i,length:r,area:l},this.buttons=[{name:"Union",callback:this.unionPolygons,title:"Union tool",classes:["mapbox-gl-draw_union",t.classPrefix?"".concat(t.classPrefix,"-union"):null]},{name:"Buffer",callback:this.bufferFeature,title:"Buffer tool",classes:["mapbox-gl-draw_buffer",t.classPrefix?"".concat(t.classPrefix,"-buffer"):null]},{name:"Copy",callback:this.copyFeature,title:"Copy tool",classes:["mapbox-gl-draw_copy",t.classPrefix?"".concat(t.classPrefix,"-copy"):null]},{name:"Cut",callback:this.cutFeature,title:"Cut tool",classes:["mapbox-gl-draw_cut",t.classPrefix?"".concat(t.classPrefix,"-cut"):null]},{name:"Length",callback:this.lengthOfFeature,title:"Length tool",classes:["mapbox-gl-draw_length",t.classPrefix?"".concat(t.classPrefix,"-length"):null]},{name:"Area",callback:this.areaOfPolygon,title:"Area tool",classes:["mapbox-gl-draw_area",t.classPrefix?"".concat(t.classPrefix,"-area"):null]}]}return Object(p.a)(e,[{key:"onAdd",value:function(e){var t=this;return this.map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl-group mapboxgl-ctrl",this.elContainer=this._container,this.buttons.filter((function(e){return!1!==t.initialOptions[e.name.toLowerCase()]})).forEach((function(e){t.addButton(e)})),this._container}},{key:"onRemove",value:function(e){var t=this;this.buttons.filter((function(e){return!1!==t.initialOptions[e.name.toLowerCase()]})).forEach((function(e){t.removeButton(e)})),this.onRemoveOrig(e)}},{key:"addButton",value:function(e){var t=document.createElement("button");t.className="mapbox-gl-draw_ctrl-draw-btn",t.setAttribute("title",e.title),e.classes instanceof Array&&e.classes.forEach((function(e){t.classList.add(e)})),t.addEventListener("click",e.callback.bind(this)),this.elContainer.appendChild(t),e.elButton=t}},{key:"removeButton",value:function(e){e.elButton.removeEventListener("click",e.action),e.elButton.remove()}},{key:"unionPolygons",value:function(){var e=this.draw.getSelected().features;if(e.length){var t;try{t=g.a.apply(void 0,Object(m.a)(this.draw.getSelected().features))}catch(n){throw new Error(n)}if("GeometryCollection"===t.geometry.type)throw new Error("Selected Features must have the same types!");var a=e.map((function(e){return e.id}));this.draw.delete(a),t.id=a.join("-"),this.draw.add(t),this.fireCreateUnion(t),this.draw.changeMode("simple_select",{featureIds:[t.id]})}}},{key:"bufferFeature",value:function(){var e=this,t=this.draw.getSelected().features;if(t.length){var a={};a.units=this.draw.options.bufferUnits||"kilometers",a.steps=this.draw.options.bufferSteps||"64";var n=[],o=[];t.forEach((function(t){var i=Object(x.a)(t,e.draw.options.bufferSize||.5,a);i.id="".concat(t.id,"_buffer_").concat(Math.floor(Math.random()*Math.floor(1e3))),n.push(i.id),o.push(i),e.draw.add(i)})),this.fireCreateBuffer(o),this.draw.changeMode("simple_select",{featureIds:n})}}},{key:"copyFeature",value:function(){var e=this.draw.getSelected().features;if(e.length){var t=[],a=[];e.forEach((function(e){var n=Object(b.a)(e,2,35);n.id="".concat(e.id,"_copy_").concat(Math.floor(Math.random()*Math.floor(1e3))),t.push(n.id),a.push(n)})),this.fireUpdateCopy(a),this.draw.changeMode("simple_select",{featureIds:t})}}},{key:"cutFeature",value:function(){var e=this.draw.getSelected().features;if(e.length){var t=[],a=[];e.forEach((function(e){var n=Object(b.a)(e,2,35);n.id="".concat(e.id,"_cut_").concat(Math.floor(Math.random()*Math.floor(1e3))),t.push(n.id),a.push(n)})),this.fireUpdateCut(a),this.draw.changeMode("simple_select",{featureIds:t})}}},{key:"lengthOfFeature",value:function(){var e=this;k.length=[];var t=this.draw.getSelected().features;t.length&&(t.forEach((function(t,a){var n=Object(y.a)(t,{units:e.draw.options.lengthUnits||"kilometers"});k.length.push({id:t.id,value:n}),e.draw.options.showLength,e.draw.setFeatureProperty(t.id,"has_length","true")&&e.draw.setFeatureProperty(t.id,"length",parseFloat(n).toFixed(4))&&e.draw.setFeatureProperty(t.id,"length_unit",e.draw.options.lengthUnits||"kilometers")})),this.fireUpdateMeasurement(k.length))}},{key:"areaOfPolygon",value:function(){var e=this;k.area=[];var t=this.draw.getSelected().features;t.length&&(t.forEach((function(t,a){var n=Object(v.a)(t);k.area.push({id:t.id,value:n}),e.draw.options.showArea,e.draw.setFeatureProperty(t.id,"has_area","true")&&e.draw.setFeatureProperty(t.id,"area",parseFloat(n).toFixed(4))})),this.fireUpdateMeasurement(k.area))}},{key:"fireCreateUnion",value:function(e){this.map.fire(j.j.CREATE,{action:"UnionPolygon",features:e})}},{key:"fireCreateBuffer",value:function(e){this.map.fire(j.j.CREATE,{action:"Buffer",features:e})}},{key:"fireUpdateCopy",value:function(e){this.map.fire(j.j.UPDATE,{action:"Copy",features:e})}},{key:"fireUpdateCut",value:function(e){this.map.fire(j.j.UPDATE,{action:"Cut",features:e})}},{key:"fireUpdateMeasurement",value:function(e){this.map.fire(j.j.UPDATE,{action:"Measurement",features:e})}}]),e}();a(55);var C=function(){"unavailable"===f.a.getRTLTextPluginStatus()&&f.a.setRTLTextPlugin("https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js",(function(e){e&&console.error(e)}),!0);var e=Object(o.useRef)(null),t=Object(o.useState)(),a=Object(c.a)(t,2),i=a[0],r=a[1];return Object(o.useEffect)((function(){M=new f.a.Map({container:e.current||"",style:"https://map.ir/vector/styles/main/mapir-xyz-light-style.json",center:[51.3857,35.6102],zoom:10,pitch:0,interactive:!0,hash:!0,attributionControl:!0,customAttribution:"\xa9 Map \xa9 Openstreetmap",transformRequest:function(e){return{url:e,headers:{"x-api-key":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImRiZWU0YWU4OTk4OTA3MmQ3OTFmMjQ4ZDE5N2VhZTgwZWU2NTUyYjhlYjczOWI2NDdlY2YyYzIzNWRiYThiMzIzOTM5MDkzZDM0NTY2MmU3In0.eyJhdWQiOiI5NDMyIiwianRpIjoiZGJlZTRhZTg5OTg5MDcyZDc5MWYyNDhkMTk3ZWFlODBlZTY1NTJiOGViNzM5YjY0N2VjZjJjMjM1ZGJhOGIzMjM5MzkwOTNkMzQ1NjYyZTciLCJpYXQiOjE1OTA4MjU0NzIsIm5iZiI6MTU5MDgyNTQ3MiwiZXhwIjoxNTkzNDE3NDcyLCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.M_z4xJlJRuYrh8RFe9UrW89Y_XBzpPth4yk3hlT-goBm8o3x8DGCrSqgskFfmJTUD2wC2qSoVZzQKB67sm-swtD5fkxZO7C0lBCMAU92IYZwCdYehIOtZbP5L1Lfg3C6pxd0r7gQOdzcAZj9TStnKBQPK3jSvzkiHIQhb6I0sViOS_8JceSNs9ZlVelQ3gs77xM2ksWDM6vmqIndzsS-5hUd-9qdRDTLHnhdbS4_UBwNDza47Iqd5vZkBgmQ_oDZ7dVyBuMHiQFg28V6zhtsf3fijP0UhePCj4GM89g3tzYBOmuapVBobbX395FWpnNC3bYg7zDaVHcllSUYDjGc1A","Mapir-SDK":"reactjs"}}}}),O=new h.a({modes:Object(s.a)({},h.a.modes),styles:_,bufferSize:.5,bufferUnit:"kilometers",bufferSteps:64,userProperties:!0}),M.once("load",(function(){M.resize(),M.addControl(O,"top-right"),r(M.addControl(function(e,t){return new z({draw:e,classPrefix:t})}(O,"custom-prefix"),"top-right")),O.set({type:"FeatureCollection",features:[{type:"Feature",properties:{},id:"example-id",geometry:{type:"Polygon",coordinates:[[[51.41742415918904,35.73019558439101],[51.31319413385742,35.702773908694724],[51.378997493472525,35.665562843119986],[51.45008537540798,35.67776544979942],[51.46619566741822,35.70822028156377],[51.41742415918904,35.73019558439101]]]}}]}),M.on("draw.create",(function(e){console.log(e)})),M.on("draw.update",(function(e){console.log(e)}))}))}),[]),Object(o.useEffect)((function(){var e,t;i&&(null===(e=document.querySelector(".mapbox-gl-draw_length"))||void 0===e||e.addEventListener("click",(function(){console.log(k.length)}))),i&&(null===(t=document.querySelector(".mapbox-gl-draw_area"))||void 0===t||t.addEventListener("click",(function(){console.log(k.area)})))}),[i]),Object(n.jsx)("div",{className:"map-wrapper",children:Object(n.jsx)("div",{id:"map",ref:e})})},P=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,57)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),o(e),i(e),r(e)}))};l.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(C,{})}),document.getElementById("root")),P()}},[[56,1,2]]]);
//# sourceMappingURL=main.358223e2.chunk.js.map