{"version":3,"sources":["../../src/index.js","App.js","reportWebVitals.js","index.js"],"names":["require","map","draw","extendDrawBar","opt","this","options","buttons","onRemoveOrig","onRemove","name","callback","unionPolygons","title","classes","classPrefix","bufferFeature","copyFeature","_container","document","createElement","className","elContainer","forEach","b","addButton","removeButton","elButton","setAttribute","Array","c","classList","add","addEventListener","bind","appendChild","removeEventListener","action","remove","selectedFeatures","getSelected","features","length","unionPoly","union","ids","i","id","delete","changeMode","featureIDs","main","buffered","buffer","bufferSize","units","translatedPoly","transformTranslate","type","geometry","properties","App","mapboxGl","getRTLTextPluginStatus","setRTLTextPlugin","err","console","error","mapRef","useRef","useEffect","Map","container","current","style","center","zoom","pitch","interactive","hash","attributionControl","customAttribution","transformRequest","url","headers","MapboxDraw","modes","userProperties","once","resize","addControl","AdditionalTools","set","coordinates","ref","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ebca9fa8.chunk.js","sourcesContent":["import union from '@turf/union';\nimport buffer from '@turf/buffer';\nimport transformTranslate from '@turf/transform-translate';\n\nrequire('./index.css');\n\nclass extendDrawBar {\n    constructor(opt) {\n        this.draw = opt.draw;\n        this.options = opt.options;\n        this.buttons = opt.buttons || [];\n        this.onRemoveOrig = opt.draw.onRemove;\n\n        this.buttons = [\n            {\n                name: 'Union',\n                callback: this.unionPolygons,\n                title: `Union tool`,\n                classes: ['mapbox-gl-draw_union', opt.classPrefix ? `${opt.classPrefix}-union` : null],\n            },\n            {\n                name: 'Buffer',\n                callback: this.bufferFeature,\n                title: `Buffer tool`,\n                classes: ['mapbox-gl-draw_buffer', opt.classPrefix ? `${opt.classPrefix}-buffer` : null],\n            },\n            {\n                name: 'Copy',\n                callback: this.copyFeature,\n                title: `Copy tool`,\n                classes: ['mapbox-gl-draw_copy', opt.classPrefix ? `${opt.classPrefix}-copy` : null],\n            },\n        ];\n    }\n\n    onAdd(map) {\n        this.map = map;\n        this._container = document.createElement('div');\n        this._container.className = 'mapboxgl-ctrl-group mapboxgl-ctrl';\n        this.elContainer = this._container;\n        this.buttons.forEach((b) => {\n            this.addButton(b);\n        });\n        return this._container;\n    }\n    onRemove(map) {\n        this.buttons.forEach((b) => {\n            this.removeButton(b);\n        });\n        this.onRemoveOrig(map);\n    }\n\n    addButton(opt) {\n        var elButton = document.createElement('button');\n        elButton.className = 'mapbox-gl-draw_ctrl-draw-btn';\n        elButton.setAttribute('title', opt.title);\n        if (opt.classes instanceof Array) {\n            opt.classes.forEach((c) => {\n                elButton.classList.add(c);\n            });\n        }\n        elButton.addEventListener('click', opt.callback.bind(this));\n        this.elContainer.appendChild(elButton);\n        opt.elButton = elButton;\n    }\n\n    removeButton(opt) {\n        opt.elButton.removeEventListener('click', opt.action);\n        opt.elButton.remove();\n    }\n\n    unionPolygons() {\n        const selectedFeatures = this.draw.getSelected().features;\n        if (!selectedFeatures.length) return;\n\n        let unionPoly = union(...selectedFeatures);\n        // let unionPoly = union(features);\n        let ids = selectedFeatures.map((i) => i.id);\n        this.draw.delete(ids);\n        this.draw.add(unionPoly);\n        this.draw.changeMode('simple_select', { featureIDs: [unionPoly.id] });\n    }\n\n    bufferFeature() {\n        const selectedFeatures = this.draw.getSelected().features;\n        if (!selectedFeatures.length) return;\n\n        let main = selectedFeatures[0];\n        let buffered = buffer(main, this.draw.options.bufferSize || 500, { units: 'meters' });\n        buffered.id = main.id + '-buffer';\n        this.draw.add(buffered);\n        this.draw.changeMode('simple_select', { featureIDs: [buffered.id] });\n    }\n\n    copyFeature() {\n        const selectedFeatures = this.draw.getSelected().features;\n        if (!selectedFeatures.length) return;\n\n        let main = selectedFeatures[0];\n        var translatedPoly = transformTranslate(main, 2, 35);\n        // this.draw.add(translatedPoly);\n        // If id had not changed, the main feature will transformTranslate!\n        this.draw.add({\n            id: `copy_of_${translatedPoly.id}`,\n            type: translatedPoly.type,\n            geometry: translatedPoly.geometry,\n            properties: translatedPoly.properties,\n        });\n\n        this.draw.changeMode('simple_select', { featureIDs: [`copy_of_${translatedPoly.id}`] });\n    }\n}\n\nexport default (draw, options) =>\n    new extendDrawBar({\n        draw,\n        options,\n    });\n","import React, { useRef, useEffect } from 'react';\nimport mapboxGl from 'mapbox-gl';\nimport MapboxDraw from '@mapbox/mapbox-gl-draw';\nimport '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css';\nimport AdditionalTools from 'mapbox-gl-draw-additional-tools';\nimport './App.css';\n\nlet map;\nlet draw;\n\nfunction App() {\n    if (mapboxGl.getRTLTextPluginStatus() === 'unavailable')\n        mapboxGl.setRTLTextPlugin(\n            'https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js',\n            (err) => {\n                err && console.error(err);\n            },\n            true\n        );\n    let mapRef = useRef(null);\n\n    useEffect(() => {\n        map = new mapboxGl.Map({\n            container: mapRef.current || '',\n            style: `https://map.ir/vector/styles/main/mapir-xyz-light-style.json`,\n            center: [51.3857, 35.6102],\n            zoom: 10,\n            pitch: 0,\n            interactive: true,\n            hash: true,\n            attributionControl: true,\n            customAttribution: '© Map © Openstreetmap',\n            transformRequest: (url) => {\n                return {\n                    url: url,\n                    headers: {\n                        'x-api-key':\n                            'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImRiZWU0YWU4OTk4OTA3MmQ3OTFmMjQ4ZDE5N2VhZTgwZWU2NTUyYjhlYjczOWI2NDdlY2YyYzIzNWRiYThiMzIzOTM5MDkzZDM0NTY2MmU3In0.eyJhdWQiOiI5NDMyIiwianRpIjoiZGJlZTRhZTg5OTg5MDcyZDc5MWYyNDhkMTk3ZWFlODBlZTY1NTJiOGViNzM5YjY0N2VjZjJjMjM1ZGJhOGIzMjM5MzkwOTNkMzQ1NjYyZTciLCJpYXQiOjE1OTA4MjU0NzIsIm5iZiI6MTU5MDgyNTQ3MiwiZXhwIjoxNTkzNDE3NDcyLCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.M_z4xJlJRuYrh8RFe9UrW89Y_XBzpPth4yk3hlT-goBm8o3x8DGCrSqgskFfmJTUD2wC2qSoVZzQKB67sm-swtD5fkxZO7C0lBCMAU92IYZwCdYehIOtZbP5L1Lfg3C6pxd0r7gQOdzcAZj9TStnKBQPK3jSvzkiHIQhb6I0sViOS_8JceSNs9ZlVelQ3gs77xM2ksWDM6vmqIndzsS-5hUd-9qdRDTLHnhdbS4_UBwNDza47Iqd5vZkBgmQ_oDZ7dVyBuMHiQFg28V6zhtsf3fijP0UhePCj4GM89g3tzYBOmuapVBobbX395FWpnNC3bYg7zDaVHcllSUYDjGc1A', //dev api key\n                        'Mapir-SDK': 'reactjs',\n                    },\n                };\n            },\n        });\n        draw = new MapboxDraw({\n            modes: {\n                ...MapboxDraw.modes,\n            },\n            userProperties: true,\n        });\n\n        map.once('load', () => {\n            map.resize();\n            map.addControl(draw, 'top-right');\n            map.addControl(AdditionalTools(draw), 'top-right');\n            draw.set({\n                type: 'FeatureCollection',\n                features: [\n                    {\n                        type: 'Feature',\n                        properties: {},\n                        id: 'example-id',\n                        geometry: {\n                            type: 'Polygon',\n                            coordinates: [\n                                [\n                                    [51.41742415918904, 35.73019558439101],\n                                    [51.31319413385742, 35.702773908694724],\n                                    [51.378997493472525, 35.665562843119986],\n                                    [51.45008537540798, 35.67776544979942],\n                                    [51.46619566741822, 35.70822028156377],\n                                    [51.41742415918904, 35.73019558439101],\n                                ],\n                            ],\n                        },\n                    },\n                ],\n            });\n        });\n    }, []);\n\n    return (\n        <div className=\"map-wrapper\">\n            <div id=\"map\" ref={mapRef} />\n        </div>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}