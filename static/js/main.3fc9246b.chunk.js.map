{"version":3,"sources":["../../src/index.js","App.js","reportWebVitals.js","index.js"],"names":["require","map","draw","measurement","length","area","addToolStyle","defaultStyle","id","type","filter","layout","paint","extendDrawBar","opt","this","onRemoveOrig","onRemove","options","union","copy","cut","buffer","centroid","initialOptions","buttons","name","callback","centroidPolygons","title","classes","classPrefix","toPoints","unionPolygons","bufferFeature","copyFeature","cutFeature","lengthOfFeature","areaOfPolygon","_container","document","createElement","className","elContainer","button","toLowerCase","forEach","b","addButton","removeButton","elButton","setAttribute","Array","c","classList","add","addEventListener","bind","appendChild","removeEventListener","action","remove","selectedFeatures","getSelected","features","ids","centroids","main","geometry","Centroid","Math","floor","random","push","fireCreateCentroid","changeMode","featureIds","vertcies","includes","vertex","helpers","meta","fireCreateVertcies","unionPoly","Union","err","Error","i","delete","join","fireCreateUnion","bufferOptions","units","bufferUnits","steps","bufferSteps","buffers","buffered","Buffer","bufferSize","fireCreateBuffer","translated","translatedPoly","transformTranslate","fireUpdateCopy","cuts","cutPoly","fireUpdateCut","idx","Length","lengthUnits","value","showLength","setFeatureProperty","parseFloat","toFixed","fireUpdateMeasurement","Area","showArea","newF","fire","events","CREATE","UPDATE","App","mapboxGl","getRTLTextPluginStatus","setRTLTextPlugin","console","error","mapRef","useRef","useEffect","Map","container","current","style","center","zoom","pitch","interactive","hash","attributionControl","customAttribution","transformRequest","url","headers","MapboxDraw","modes","styles","userProperties","bufferUnit","once","resize","addControl","additionalTools","querySelector","alert","JSON","stringify","set","properties","coordinates","on","e","log","ref","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3fc9246b.chunk.js","sourcesContent":["import defaultStyle from '@mapbox/mapbox-gl-draw/src/lib/theme';\nimport { events } from '@mapbox/mapbox-gl-draw/src/constants';\nimport Union from '@turf/union';\nimport Buffer from '@turf/buffer';\nimport Length from '@turf/length';\nimport Area from '@turf/area';\nimport Centroid from '@turf/centroid';\nimport * as meta from '@turf/meta';\nimport * as helpers from '@turf/helpers';\nimport transformTranslate from '@turf/transform-translate';\n\nrequire('./index.css');\n\nlet measurement = {\n  length: [],\n  area: [],\n};\n\nconst addToolStyle = [\n  ...defaultStyle,\n  {\n    id: 'gl-draw-line-active-length',\n    type: 'symbol',\n    filter: ['all', ['==', '$type', 'LineString'], ['==', 'active', 'true'], ['==', 'user_has_length', 'true']],\n    layout: {\n      'symbol-placement': 'line-center',\n      'text-rotation-alignment': 'map',\n      'text-pitch-alignment': 'viewport',\n      'text-max-angle': 30,\n      'text-max-width': 300,\n      'text-field': '{user_length} {user_length_unit}',\n      'text-font': ['IranSans-Noto'],\n      'text-size': ['interpolate', ['linear'], ['zoom'], 8, 8, 10, 12, 16, 16],\n      'text-allow-overlap': false,\n    },\n    paint: {\n      'text-opacity': ['interpolate', ['linear'], ['zoom'], 8, 1],\n      'text-color': '#000',\n      'text-halo-color': ['interpolate', ['linear'], ['zoom'], 2, '#ffffff', 3, '#ffffff'],\n      'text-halo-width': 0.3,\n      'text-halo-blur': 1,\n    },\n  },\n  {\n    id: 'gl-draw-polygon-active-length',\n    type: 'symbol',\n    filter: ['all', ['==', '$type', 'Polygon'], ['==', 'active', 'true'], ['==', 'user_has_length', 'true']],\n    layout: {\n      'symbol-placement': 'line-center',\n      'text-rotation-alignment': 'map',\n      'text-pitch-alignment': 'viewport',\n      'text-max-angle': 30,\n      'text-max-width': 300,\n      'text-field': '{user_length} {user_length_unit}',\n      'text-font': ['IranSans-Noto'],\n      'text-size': ['interpolate', ['linear'], ['zoom'], 8, 8, 10, 12, 16, 16],\n      'text-allow-overlap': false,\n    },\n    paint: {\n      'text-opacity': ['interpolate', ['linear'], ['zoom'], 8, 1],\n      'text-color': '#000',\n      'text-halo-color': ['interpolate', ['linear'], ['zoom'], 2, '#ffffff', 3, '#ffffff'],\n      'text-halo-width': 0.3,\n      'text-halo-blur': 1,\n    },\n  },\n  {\n    id: 'gl-draw-polygon-active-area',\n    type: 'symbol',\n    filter: ['all', ['==', '$type', 'Polygon'], ['==', 'active', 'true'], ['==', 'user_has_area', 'true']],\n    layout: {\n      'symbol-placement': 'line',\n      'text-rotation-alignment': 'map',\n      'text-pitch-alignment': 'viewport',\n      'text-max-angle': 30,\n      'text-max-width': 300,\n      'text-field': '{user_area} meters^2',\n      'text-font': ['IranSans-Noto'],\n      'text-size': ['interpolate', ['linear'], ['zoom'], 8, 8, 10, 12, 16, 16],\n      'text-allow-overlap': false,\n    },\n    paint: {\n      'text-opacity': ['interpolate', ['linear'], ['zoom'], 8, 1],\n      'text-color': '#000',\n      'text-halo-color': ['interpolate', ['linear'], ['zoom'], 2, '#ffffff', 3, '#ffffff'],\n      'text-halo-width': 0.3,\n      'text-halo-blur': 1,\n    },\n  },\n];\nclass extendDrawBar {\n  constructor(opt) {\n    this.draw = opt.draw;\n    this.onRemoveOrig = opt.draw.onRemove;\n    const { union, copy, cut, buffer, length, area, centroid } = this.draw.options;\n    this.initialOptions = { union, copy, cut, buffer, length, area, centroid };\n\n    this.buttons = [\n      {\n        name: 'Centroid',\n        callback: this.centroidPolygons,\n        title: `Centroid tool`,\n        classes: ['mapbox-gl-draw_centroid', opt.classPrefix ? `${opt.classPrefix}-centroid` : null],\n      },\n      {\n        name: 'PolygonToPoints',\n        callback: this.toPoints,\n        title: `PolygonToPoints tool`,\n        classes: ['mapbox-gl-draw_poly_to_points', opt.classPrefix ? `${opt.classPrefix}-poly_to_points` : null],\n      },\n      {\n        name: 'LineToPoints',\n        callback: this.toPoints,\n        title: `LineToPoints tool`,\n        classes: ['mapbox-gl-draw_line_to_points', opt.classPrefix ? `${opt.classPrefix}-line_to_points` : null],\n      },\n      {\n        name: 'Union',\n        callback: this.unionPolygons,\n        title: `Union tool`,\n        classes: ['mapbox-gl-draw_union', opt.classPrefix ? `${opt.classPrefix}-union` : null],\n      },\n      {\n        name: 'Buffer',\n        callback: this.bufferFeature,\n        title: `Buffer tool`,\n        classes: ['mapbox-gl-draw_buffer', opt.classPrefix ? `${opt.classPrefix}-buffer` : null],\n      },\n      {\n        name: 'Copy',\n        callback: this.copyFeature,\n        title: `Copy tool`,\n        classes: ['mapbox-gl-draw_copy', opt.classPrefix ? `${opt.classPrefix}-copy` : null],\n      },\n      {\n        name: 'Cut',\n        callback: this.cutFeature,\n        title: `Cut tool`,\n        classes: ['mapbox-gl-draw_cut', opt.classPrefix ? `${opt.classPrefix}-cut` : null],\n      },\n      {\n        name: 'Length',\n        callback: this.lengthOfFeature,\n        title: `Length tool`,\n        classes: ['mapbox-gl-draw_length', opt.classPrefix ? `${opt.classPrefix}-length` : null],\n      },\n      {\n        name: 'Area',\n        callback: this.areaOfPolygon,\n        title: `Area tool`,\n        classes: ['mapbox-gl-draw_area', opt.classPrefix ? `${opt.classPrefix}-area` : null],\n      },\n    ];\n  }\n\n  onAdd(map) {\n    this.map = map;\n    this._container = document.createElement('div');\n    this._container.className = 'mapboxgl-ctrl-group mapboxgl-ctrl';\n    this.elContainer = this._container;\n    this.buttons\n      .filter((button) => this.initialOptions[button.name.toLowerCase()] !== false)\n      .forEach((b) => {\n        this.addButton(b);\n      });\n    return this._container;\n  }\n  onRemove(map) {\n    this.buttons\n      .filter((button) => this.initialOptions[button.name.toLowerCase()] !== false)\n      .forEach((b) => {\n        this.removeButton(b);\n      });\n    this.onRemoveOrig(map);\n  }\n\n  addButton(opt) {\n    var elButton = document.createElement('button');\n    elButton.className = 'mapbox-gl-draw_ctrl-draw-btn';\n    elButton.setAttribute('title', opt.title);\n    if (opt.classes instanceof Array) {\n      opt.classes.forEach((c) => {\n        elButton.classList.add(c);\n      });\n    }\n    elButton.addEventListener('click', opt.callback.bind(this));\n    this.elContainer.appendChild(elButton);\n    opt.elButton = elButton;\n  }\n\n  removeButton(opt) {\n    opt.elButton.removeEventListener('click', opt.action);\n    opt.elButton.remove();\n  }\n\n  centroidPolygons() {\n    const selectedFeatures = this.draw.getSelected().features;\n    if (!selectedFeatures.length) return;\n\n    const ids = [];\n    const centroids = [];\n    selectedFeatures.forEach((main) => {\n      if (main.geometry.type !== 'Polygon') return;\n      const centroid = Centroid(main.geometry);\n      centroid.id = `${main.id}_centroid_${Math.floor(Math.random() * Math.floor(1000))}`;\n      ids.push(centroid.id);\n      centroids.push(centroid);\n      this.draw.add(centroid);\n    });\n    this.fireCreateCentroid(centroids);\n    this.draw.changeMode('simple_select', { featureIds: ids });\n  }\n\n  toPoints() {\n    const selectedFeatures = this.draw.getSelected().features;\n    if (!selectedFeatures.length) return;\n    let ids = [];\n    let vertcies = [];\n    selectedFeatures.forEach((main) => {\n      if (['Point', 'MultiPoint'].includes(main.geometry.type)) return;\n      let vertex = helpers.multiPoint(meta.coordAll(main.geometry));\n      vertex.id = `${main.id}_vertex_${Math.floor(Math.random() * Math.floor(1000))}`;\n      ids.push(vertex.id);\n      vertcies.push(vertex);\n    });\n    this.fireCreateVertcies(vertcies);\n    this.draw.changeMode('simple_select', { featureIds: ids });\n  }\n\n  unionPolygons() {\n    const selectedFeatures = this.draw.getSelected().features;\n    if (!selectedFeatures.length) return;\n    let unionPoly;\n    try {\n      unionPoly = Union(...this.draw.getSelected().features);\n    } catch (err) {\n      throw new Error(err);\n    }\n    if (unionPoly.geometry.type === 'GeometryCollection')\n      throw new Error('Selected Features must have the same types!');\n    let ids = selectedFeatures.map((i) => i.id);\n    this.draw.delete(ids);\n    unionPoly.id = ids.join('-');\n    this.draw.add(unionPoly);\n    this.fireCreateUnion(unionPoly);\n    this.draw.changeMode('simple_select', { featureIds: [unionPoly.id] });\n  }\n\n  bufferFeature() {\n    const selectedFeatures = this.draw.getSelected().features;\n    if (!selectedFeatures.length) return;\n    const bufferOptions = {};\n    bufferOptions.units = this.draw.options.bufferUnits || 'kilometers';\n    bufferOptions.steps = this.draw.options.bufferSteps || '64';\n    let ids = [];\n    let buffers = [];\n    selectedFeatures.forEach((main) => {\n      let buffered = Buffer(main, this.draw.options.bufferSize || 0.5, bufferOptions);\n      buffered.id = `${main.id}_buffer_${Math.floor(Math.random() * Math.floor(1000))}`;\n      ids.push(buffered.id);\n      buffers.push(buffered);\n      // this.draw.add(buffered);\n    });\n    this.fireCreateBuffer(buffers);\n    this.draw.changeMode('simple_select', { featureIds: ids });\n  }\n\n  copyFeature() {\n    const selectedFeatures = this.draw.getSelected().features;\n    if (!selectedFeatures.length) return;\n    let ids = [];\n    let translated = [];\n    selectedFeatures.forEach((main) => {\n      var translatedPoly = transformTranslate(main, 2, 35);\n      translatedPoly.id = `${main.id}_copy_${Math.floor(Math.random() * Math.floor(1000))}`;\n      ids.push(translatedPoly.id);\n      translated.push(translatedPoly);\n      // this.draw.add(translatedPoly);\n    });\n    this.fireUpdateCopy(translated);\n    this.draw.changeMode('simple_select', { featureIds: ids });\n  }\n\n  cutFeature() {\n    const selectedFeatures = this.draw.getSelected().features;\n    if (!selectedFeatures.length) return;\n    let ids = [];\n    let cuts = [];\n    selectedFeatures.forEach((main) => {\n      var cutPoly = transformTranslate(main, 2, 35);\n      cutPoly.id = `${main.id}_cut_${Math.floor(Math.random() * Math.floor(1000))}`;\n      ids.push(cutPoly.id);\n      cuts.push(cutPoly);\n      // this.draw.add(translatedPoly);\n    });\n    this.fireUpdateCut(cuts);\n    this.draw.changeMode('simple_select', { featureIds: ids });\n  }\n\n  lengthOfFeature() {\n    measurement.length = [];\n    const selectedFeatures = this.draw.getSelected().features;\n    if (!selectedFeatures.length) return;\n    selectedFeatures.forEach((main, idx) => {\n      let length = Length(main, { units: this.draw.options.lengthUnits || 'kilometers' });\n      measurement.length.push({ id: main.id, value: length });\n      (this.draw.options.showLength || true) &&\n        this.draw.setFeatureProperty(main.id, 'has_length', 'true') &&\n        this.draw.setFeatureProperty(main.id, 'length', parseFloat(length).toFixed(4)) &&\n        this.draw.setFeatureProperty(main.id, 'length_unit', this.draw.options.lengthUnits || 'kilometers');\n    });\n    this.fireUpdateMeasurement(measurement.length, 'length');\n  }\n\n  areaOfPolygon() {\n    measurement.area = [];\n    const selectedFeatures = this.draw.getSelected().features;\n    if (!selectedFeatures.length) return;\n    selectedFeatures.forEach((main, idx) => {\n      let area = Area(main);\n      measurement.area.push({ id: main.id, value: area });\n      (this.draw.options.showArea || true) &&\n        this.draw.setFeatureProperty(main.id, 'has_area', 'true') &&\n        this.draw.setFeatureProperty(main.id, 'area', parseFloat(area).toFixed(4));\n    });\n    this.fireUpdateMeasurement(measurement.area, 'area');\n  }\n\n  fireCreateCentroid(newF) {\n    this.map.fire(events.CREATE, {\n      action: 'CentroidPolygon',\n      features: newF,\n    });\n  }\n  fireCreateVertcies(newF) {\n    this.map.fire(events.CREATE, {\n      action: 'toPoints',\n      features: newF,\n    });\n  }\n  fireCreateUnion(newF) {\n    this.map.fire(events.CREATE, {\n      action: 'UnionPolygon',\n      features: newF,\n    });\n  }\n  fireCreateBuffer(newF) {\n    this.map.fire(events.CREATE, {\n      action: 'Buffer',\n      features: newF,\n    });\n  }\n  fireUpdateCopy(newF) {\n    this.map.fire(events.UPDATE, {\n      action: 'Copy',\n      features: newF,\n    });\n  }\n  fireUpdateCut(newF) {\n    this.map.fire(events.UPDATE, {\n      action: 'Cut',\n      features: newF,\n    });\n  }\n  fireUpdateMeasurement(newF, type) {\n    this.map.fire(events.UPDATE, {\n      action: 'Measurement-' + type,\n      features: newF,\n    });\n  }\n}\n\n/*\noptions\n------\n{\n    union: true,\n    copy: true,\n    buffer: true,\n    length: true,\n    area: true,\n    bufferSize: 500,\n    bufferUnit: 'kilometers',\n    bufferSteps: 64,\n    lengthUnit: 'kilometers',\n    showLength: true,\n    showArea: true\n}\n*/\n\nconst additionalTools = (draw, classPrefix) =>\n  new extendDrawBar({\n    draw,\n    classPrefix,\n  });\n\nexport { additionalTools, measurement, addToolStyle };\n","import React, { useRef, useEffect } from 'react';\nimport mapboxGl from 'mapbox-gl';\nimport MapboxDraw from '@mapbox/mapbox-gl-draw';\nimport { additionalTools, measurement, addToolStyle } from 'mapbox-gl-draw-additional-tools';\n\nimport '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css';\nimport './App.css';\n\nlet map;\nlet draw;\n\nfunction App() {\n  if (mapboxGl.getRTLTextPluginStatus() === 'unavailable')\n    mapboxGl.setRTLTextPlugin(\n      'https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js',\n      (err) => {\n        err && console.error(err);\n      },\n      true\n    );\n  let mapRef = useRef(null);\n\n  useEffect(() => {\n    map = new mapboxGl.Map({\n      container: mapRef.current || '',\n      style: `https://map.ir/vector/styles/main/mapir-xyz-light-style.json`,\n      center: [51.3857, 35.6102],\n      zoom: 10,\n      pitch: 0,\n      interactive: true,\n      hash: true,\n      attributionControl: true,\n      customAttribution: '© Map © Openstreetmap',\n      transformRequest: (url) => {\n        return {\n          url: url,\n          headers: {\n            'x-api-key':\n              'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImRiZWU0YWU4OTk4OTA3MmQ3OTFmMjQ4ZDE5N2VhZTgwZWU2NTUyYjhlYjczOWI2NDdlY2YyYzIzNWRiYThiMzIzOTM5MDkzZDM0NTY2MmU3In0.eyJhdWQiOiI5NDMyIiwianRpIjoiZGJlZTRhZTg5OTg5MDcyZDc5MWYyNDhkMTk3ZWFlODBlZTY1NTJiOGViNzM5YjY0N2VjZjJjMjM1ZGJhOGIzMjM5MzkwOTNkMzQ1NjYyZTciLCJpYXQiOjE1OTA4MjU0NzIsIm5iZiI6MTU5MDgyNTQ3MiwiZXhwIjoxNTkzNDE3NDcyLCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.M_z4xJlJRuYrh8RFe9UrW89Y_XBzpPth4yk3hlT-goBm8o3x8DGCrSqgskFfmJTUD2wC2qSoVZzQKB67sm-swtD5fkxZO7C0lBCMAU92IYZwCdYehIOtZbP5L1Lfg3C6pxd0r7gQOdzcAZj9TStnKBQPK3jSvzkiHIQhb6I0sViOS_8JceSNs9ZlVelQ3gs77xM2ksWDM6vmqIndzsS-5hUd-9qdRDTLHnhdbS4_UBwNDza47Iqd5vZkBgmQ_oDZ7dVyBuMHiQFg28V6zhtsf3fijP0UhePCj4GM89g3tzYBOmuapVBobbX395FWpnNC3bYg7zDaVHcllSUYDjGc1A', //dev api key\n            'Mapir-SDK': 'reactjs',\n          },\n        };\n      },\n    });\n\n    draw = new MapboxDraw({\n      modes: {\n        ...MapboxDraw.modes,\n      },\n      styles: addToolStyle,\n      userProperties: true,\n      bufferSize: 0.5, // Default is 500\n      bufferUnit: 'kilometers', //Default is kilometers. It can be miles, degrees or kilometers\n      bufferSteps: 64, // Default is 64\n    });\n\n    map.once('load', () => {\n      map.resize();\n\n      map.addControl(draw, 'top-right');\n      map.addControl(additionalTools(draw, 'custom-prefix'), 'top-right');\n\n      document.querySelector('.mapbox-gl-draw_length')?.addEventListener('click', () => {\n        alert(JSON.stringify(measurement.length, null, 4));\n      });\n\n      document.querySelector('.mapbox-gl-draw_area')?.addEventListener('click', () => {\n        alert(JSON.stringify(measurement.area, null, 4));\n      });\n\n      draw.set({\n        type: 'FeatureCollection',\n        features: [\n          {\n            type: 'Feature',\n            properties: {},\n            id: 'example-id',\n            geometry: {\n              type: 'Polygon',\n              coordinates: [\n                [\n                  [51.41742415918904, 35.73019558439101],\n                  [51.31319413385742, 35.702773908694724],\n                  [51.378997493472525, 35.665562843119986],\n                  [51.45008537540798, 35.67776544979942],\n                  [51.46619566741822, 35.70822028156377],\n                  [51.41742415918904, 35.73019558439101],\n                ],\n              ],\n            },\n          },\n        ],\n      });\n\n      map.on('draw.create', function (e) {\n        console.log(e);\n      });\n\n      map.on('draw.update', function (e) {\n        console.log(e);\n      });\n    });\n  }, []);\n\n  return (\n    <div className=\"map-wrapper\">\n      <div id=\"map\" ref={mapRef} />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}